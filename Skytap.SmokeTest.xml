<project name="AutomationTesting" basedir="." default="RunAutomation">
	<import file="Skytap.test.common.xml" />

	<!--Smoke test is running on slave machine, so its steps are different to other regression jobs-->
	<target name="RunAutomation"> 
		<echo message="OSName: ${JenkinsEnv.COMPUTERNAME}"/>
		<echo message="Job WorkSpace is: ${JobWorkSpace.dir}"/>
		<echo message="JenkinsServer.AntUtilities.dir is: ${JenkinsServer.AntUtilities.dir}" />
		<echo message="JenkinsServer.AntScripts.dir is: ${JenkinsServer.AntScripts.dir}" />
		<echo message="JenkinsServer.ProductInstaller.dir is: ${JenkinsServer.ProductInstaller.dir}" />
		<!--TestOutput-->
		<echo message="TestBranch=${TEST_BRANCH}"/>
		<echo message="InstallerName=${INSTALLER_NAME}"/>
		<echo message="AutomationVM=${AutomationVM}"/>
		<echo message="TestTool=${Automation.TestExecutable}"/>
		<echo message="LocalProjectPath=${AutomationVM.Automation.dir}"/>
		<echo message="RemoteProjectPath=${AutomationVM.Project.dir}"/>
		
		<antcall target="InitJenkinsServerJobWorkSpace"/>
		<antcallback target="GetInstallerFileName" return="InstallerFileName"/>
		<antcall target="SetBuildDisplayName"> <param name="InstallerFileName" value="${InstallerFileName}"/> </antcall>
		<antcall target="CopyAutomationFilesToVM"> <param name="InstallerFileName" value="${InstallerFileName}"/> </antcall>
		<antcall target="RunTestCasesOnVM"/>
		<antcall target="ProcessTestCasesResults"/>
	</target>
</project>